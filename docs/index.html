<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Greetings, a Lua Filter Template</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
  <link rel="stylesheet" href="style.css" />
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<header id="title-block-header">
<h1 class="title">Greetings, a Lua Filter Template</h1>
</header>
<nav id="TOC" role="doc-toc">
<ul>
<li><a href="#checklist">Checklist</a></li>
<li><a href="#license">License</a></li>
<li><a href="#Example">Example</a>
<ul>
<li><a href="#input.md">input.md</a></li>
<li><a href="#output.md">output.md</a></li>
</ul></li>
<li><a href="#Code">Code</a></li>
</ul>
</nav>
<p><a
href="https://github.com/tarleb/lua-filter-template/actions/workflows/ci.yaml"><img
src="https://img.shields.io/github/workflow/status/tarleb/lua-filter-template/CI?logo=github"
alt="GitHub build status" /></a></p>
<p>Greetings is a friendly Lua filter that adds a welcoming message to
the document.</p>
<p>This repository serves as a template intended to make publishing of
pandoc <a href="https://pandoc.org/lua-filters.html">Lua filters</a>
easy and convenient. Just click “use this template” and then make
modifications in your new repository. See also the GitHub documentation
on <a
href="https://docs.github.com/en/repositories/creating-and-managing-repositories/creating-a-repository-from-a-template">creating
a repository from a template</a>.</p>
<h2 id="checklist">Checklist</h2>
<p>This is just a template, so a few things should be changed to make
good use of this template. You can use the checklist below to ensure
that you get the most out of it. We recommend that you perform at least
the first two steps, everything else is up to you.</p>
<ol type="1">
<li><p><input type="checkbox" disabled="" />
<strong>Rename the filter</strong>: rename the filter
<code>greetings.lua</code> to your chosen name. It’s often a good idea
to make the filter name match the repository name: if your repository is
named <code>lorem</code>, then the filter should be named
<code>lorem.lua</code>.</p></li>
<li><p><input type="checkbox" disabled="" />
<strong>Update the license</strong>: The template is published under the
MIT, and we recommend to keep the same license for your code. You should
update the LICENSE file so it has your name.</p></li>
<li><p><input type="checkbox" disabled="" />
<strong>Update this README</strong>: describe your filter, so people
will know what to expect. You may also want to update the URLs above to
match your repository.</p></li>
</ol>
<h2 id="license">License</h2>
<p>This template repository is published under the MIT license, see file
<code>LICENSE</code> for details.</p>
<h2 id="Example">Example</h2>
<h3 id="input.md">input.md</h3>
<div class="sourceCode" id="cb1"><pre
class="sourceCode markdown sample"><code class="sourceCode markdown"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> Lorem ipsum</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="an">author:</span><span class="co"> Nullus</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Donec</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>hendrerit tempor tellus. Donec pretium posuere tellus. Proin quam</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>nisl, tincidunt et, mattis eget, convallis nec, purus.</span></code></pre></div>
<h3 id="output.md">output.md</h3>
<div class="sourceCode" id="cb2"><pre
class="sourceCode markdown sample"><code class="sourceCode markdown"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="an">author:</span><span class="co"> Nullus</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="an">subtitle:</span><span class="co"> Lorem ipsum</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> Greetings!</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>Hello from the Lua filter!</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Donec</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>hendrerit tempor tellus. Donec pretium posuere tellus. Proin quam nisl,</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>tincidunt et, mattis eget, convallis nec, purus.</span></code></pre></div>
<h2 id="Code">Code</h2>
<p><a href="greetings.lua">greetings.lua</a></p>
<div class="sourceCode" id="greetings.lua"><pre
class="sourceCode lua"><code class="sourceCode lua"><span id="greetings.lua-1"><a href="#greetings.lua-1" aria-hidden="true" tabindex="-1"></a><span class="co">--- greetings.lua – turns any document into a friendly greeting</span></span>
<span id="greetings.lua-2"><a href="#greetings.lua-2" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="greetings.lua-3"><a href="#greetings.lua-3" aria-hidden="true" tabindex="-1"></a><span class="co">--- Copyright: © 2021–2022 Contributors</span></span>
<span id="greetings.lua-4"><a href="#greetings.lua-4" aria-hidden="true" tabindex="-1"></a><span class="co">--- License: MIT – see LICENSE for details</span></span>
<span id="greetings.lua-5"><a href="#greetings.lua-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="greetings.lua-6"><a href="#greetings.lua-6" aria-hidden="true" tabindex="-1"></a><span class="co">-- Makes sure users know if their pandoc version is too old for this</span></span>
<span id="greetings.lua-7"><a href="#greetings.lua-7" aria-hidden="true" tabindex="-1"></a><span class="co">-- filter.</span></span>
<span id="greetings.lua-8"><a href="#greetings.lua-8" aria-hidden="true" tabindex="-1"></a><span class="cn">PANDOC_VERSION</span><span class="op">:</span>must_be_at_least <span class="st">&#39;2.17&#39;</span></span>
<span id="greetings.lua-9"><a href="#greetings.lua-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="greetings.lua-10"><a href="#greetings.lua-10" aria-hidden="true" tabindex="-1"></a><span class="co">--- Amends the contents of a document with a simple greeting.</span></span>
<span id="greetings.lua-11"><a href="#greetings.lua-11" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> function say_hello <span class="op">(</span>doc<span class="op">)</span></span>
<span id="greetings.lua-12"><a href="#greetings.lua-12" aria-hidden="true" tabindex="-1"></a>  doc<span class="op">.</span>meta<span class="op">.</span>subtitle <span class="op">=</span> doc<span class="op">.</span>meta<span class="op">.</span>title            <span class="co">-- demote title to subtitle</span></span>
<span id="greetings.lua-13"><a href="#greetings.lua-13" aria-hidden="true" tabindex="-1"></a>  doc<span class="op">.</span>meta<span class="op">.</span>title <span class="op">=</span> pandoc<span class="op">.</span>Inlines <span class="st">&#39;Greetings!&#39;</span>  <span class="co">-- set new title</span></span>
<span id="greetings.lua-14"><a href="#greetings.lua-14" aria-hidden="true" tabindex="-1"></a>  doc<span class="op">.</span>blocks<span class="op">:</span><span class="fu">insert</span><span class="op">(</span><span class="dv">1</span><span class="op">,</span> pandoc<span class="op">.</span>Para <span class="st">&#39;Hello from the Lua filter!&#39;</span><span class="op">)</span></span>
<span id="greetings.lua-15"><a href="#greetings.lua-15" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> doc</span>
<span id="greetings.lua-16"><a href="#greetings.lua-16" aria-hidden="true" tabindex="-1"></a><span class="cf">end</span></span>
<span id="greetings.lua-17"><a href="#greetings.lua-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="greetings.lua-18"><a href="#greetings.lua-18" aria-hidden="true" tabindex="-1"></a><span class="cf">return</span> <span class="op">{</span></span>
<span id="greetings.lua-19"><a href="#greetings.lua-19" aria-hidden="true" tabindex="-1"></a>  <span class="co">-- Apply the `say_hello` function to the main Pandoc document.</span></span>
<span id="greetings.lua-20"><a href="#greetings.lua-20" aria-hidden="true" tabindex="-1"></a>  <span class="op">{</span> <span class="cn">P</span>andoc <span class="op">=</span> say_hello <span class="op">}</span></span>
<span id="greetings.lua-21"><a href="#greetings.lua-21" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
</body>
</html>
